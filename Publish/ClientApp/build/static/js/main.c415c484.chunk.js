(this.webpackJsonpwebui=this.webpackJsonpwebui||[]).push([[0],{104:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n(12),s=n(26),c=n(7),l=n(35),u=n(15),m=n(52),d=n(46),p=n(14),f=n.n(p),g=(n(32),n(53),n(33)),h=n.n(g),v=h.a.create({baseURL:"/"});var E=h.a.create({baseURL:"https://tomz-shorten-url.herokuapp.com"}),b={post:function(){return function(e,t){var n,a=t(),r=new FormData;r.append("userId",a.loginUser.user.userId),r.append("password",a.loginUser.user.password),(n=r,v.post("/auth/default/login",n)).then((function(t){console.log(t);var n=JSON.parse(t.request.response);console.log(n),200===t.status&&(sessionStorage.setItem("authToken",JSON.stringify(n.authToken)),p.store.addNotification({message:"\u767b\u5165\u6210\u529f",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e({type:"POST_LOGIN",user:{authToken:n.authToken,userId:n.userId,password:"",isAuth:!!n.authToken}}))})).catch((function(e){console.log(e),p.store.addNotification({title:"\u767b\u5165\u5931\u6557",message:"\u5e33\u865f\u6216\u5bc6\u78bc\u8f38\u5165\u932f\u8aa4\uff0c\u8acb\u91cd\u65b0\u78ba\u8a8d\u5f8c\u91cd\u8a66",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}))}},setUserId:function(e){return function(t,n){var a=n();t({type:"SET_USERID",user:{authToken:"",userId:e,password:a.loginUser.user.password,isAuth:!1}})}},setPassword:function(e){return function(t,n){t({type:"SET_PASSWORD",user:{authToken:"",userId:n().loginUser.user.userId,password:e,isAuth:!1}})}},logout:function(){return function(e,t){sessionStorage.removeItem("authToken"),document.cookie="AuthToken=; path=/;",e({type:"USER_LOGOUT",user:{authToken:"",userId:"",password:"",isAuth:!1}})}}},O={post:function(){return function(e,t){var n=t();e({type:"POST",value:{isActive:!0}});var a,r={url:n.shortemer.value.originalUrl};(a=r,E.post("/urlshortemer/default/shorten",a)).then((function(t){console.log(t);var a=JSON.parse(t.request.response);console.log(a),e({type:"POST",value:{originalUrl:"",translationUrl:"",isActive:!0}}),200===t.status&&(p.store.addNotification({title:"\u7e2e\u7db2\u5740\u5b8c\u6210",message:"\u9023\u7d50\u4ee5\u7522\u751f\uff0c\u611f\u8b1d\u4f7f\u7528! "+a.data,type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e({type:"POST",value:{originalUrl:n.shortemer.value.originalUrl,translationUrl:a.data,isActive:!1}}))})).catch((function(t){e({type:"POST",value:{isActive:!1}}),p.store.addNotification({title:"\u7e2e\u7db2\u5740\u7522\u751f\u5931\u6557",message:"\u7e2e\u7db2\u5740\u7522\u751f\u5931\u6557\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\uff0c\u5982\u91cd\u8907\u767c\u751f\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1\u3002",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}))}},setUrl:function(e){return function(t,n){n();t({type:"SET_URL",value:{originalUrl:e,translationUrl:"",isActive:!1}})}}},_={loginUser:function(e,t){if(void 0===e)return{user:{authToken:"",userId:"",password:"",isAuth:!1}};switch(t.type){case"POST_LOGIN":case"SET_USERID":case"SET_PASSWORD":case"USER_LOGOUT":case"ERROR_MESSAGE":return{user:t.user};default:return e}},shortemer:function(e,t){if(void 0===e)return{value:{originalUrl:"",translationUrl:"",isActive:!1}};switch(t.type){case"POST":case"SET_URL":return{value:t.value};default:return e}}},w=n(54),S=n.n(w);var y=n(19),N=n(11),T=n(17),U=n(18),I=n(21),k=n(20),j=n(122),A=n(123),R=n(119),L=n(120),P=n(121),x=n(124),D=(n(104),function(e){Object(I.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(U.a)(n,[{key:"render",value:function(){return a.createElement("div",null,a.createElement(R.a,{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-custom","aria-label":"Main navigation"},a.createElement("div",{className:"container-fluid"},a.createElement(L.a,{onClick:this.toggle,className:"navbar-toggler p-0 border-0","data-bs-toggle":"offcanvas","aria-label":"Toggle navigation"},a.createElement("span",{className:"navbar-toggler-icon"})),a.createElement(P.a,{tag:y.b,to:"/shortenurl"},"Tomz.s"),a.createElement(x.a,{className:"navbar-collapse offcanvas-collapse",isOpen:this.state.isOpen},a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0 s-menu"},a.createElement(j.a,{className:"s-item"},a.createElement(A.a,{tag:y.b,to:"/home"},"\u806f\u7d61\u6211\u5011")))))))}}]),n}(a.PureComponent)),C=Object(i.c)((function(e){return e.loginUser}),b)(D),W=function(e){Object(I.a)(n,e);var t=Object(k.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(U.a)(n,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement(C,null),a.createElement("div",{className:"container"},this.props.children))}}]),n}(a.PureComponent),G=n(56),J=n.n(G),F=(n(114),function(e){Object(I.a)(n,e);var t=Object(k.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(U.a)(n,[{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement(J.a,{active:this.props.value.isActive,spinner:!0,text:"Loading..."},a.createElement("div",{className:"text-center"},a.createElement("main",{className:"form-signin"},a.createElement("form",null,a.createElement("div",{className:"p-3 mb-4 bg-light rounded-3"},a.createElement("div",{className:"container-fluid py-5"},a.createElement("h1",{className:"display-5 fw-bold"},"\u5c31\u3002\u5f88\u3002Short"),a.createElement("p",{className:"col-md-12 fs-4"},"\u8b93\u9023\u7d50\u66f4\u52a0\u7c21\u77ed\u3001\u4e14\u4fbf\u65bc\u5206\u4eab\u3002"),a.createElement("div",{className:"form-floating mt-3"},a.createElement("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",onChange:function(t){e.props.setUrl(t.target.value)}}),a.createElement("label",{htmlFor:"floatingInput"},"\u5728\u9019\u88e1\u8f38\u5165\u4f60\u7684\u7db2\u5740:")),a.createElement("button",{className:"w-100 btn btn-lg btn-primary mb-3 mt-3",type:"button",onClick:function(){e.props.post()}},"\u7522\u751f"))),a.createElement("p",{className:"mt-5 mb-3 text-muted"},"\xa9 2017\u20132021"),a.createElement("p",{className:"mt-5 mb-3 text-muted"},"\u6211\u5011\u7684\u76ee\u6a19\u662f\u63d0\u4f9b\u53ef\u9760\u7684\u670d\u52d9\uff0c\u8b93\u6211\u5011\u7684\u5ba2\u6236\u96c6\u4e2d\u7cbe\u529b\u8655\u7406\u6700\u91cd\u8981\u7684\u4e8b\u52d9\u3002"),a.createElement("p",{className:"mt-5 mb-3 text-muted"},this.props.value.translationUrl))))))}}]),n}(a.PureComponent)),X=Object(i.c)((function(e){return e.shortemer}),O)(F),B=(n(115),n(116),function(){return r.a.createElement("div",null,r.a.createElement(f.a,null),r.a.createElement(y.a,null,r.a.createElement(W,null,r.a.createElement(N.d,null,r.a.createElement(N.b,{path:"/shortenurl",component:X}),r.a.createElement(N.a,{to:"/shortenurl"})))))}),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(117);var M=document.getElementsByTagName("base")[0].getAttribute("href"),V=Object(c.a)({basename:M}),$=function(e,t){var n=[m.a,Object(d.a)(e),S.a],a=Object(u.c)(Object(l.a)(Object(l.a)({},_),{},{router:Object(s.b)(e)})),r=[],o="undefined"===typeof window?null:window;return o&&o.__REDUX_DEVTOOLS_EXTENSION__&&r.push(o.__REDUX_DEVTOOLS_EXTENSION__()),Object(u.e)(a,t,u.d.apply(void 0,[u.a.apply(void 0,n)].concat(r)))}(V);o.render(a.createElement(i.a,{store:$},a.createElement(s.a,{history:V},a.createElement(B,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");q?function(e){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):z(e)}))}}()},58:function(e,t,n){e.exports=n(118)}},[[58,1,2]]]);
//# sourceMappingURL=main.c415c484.chunk.js.map